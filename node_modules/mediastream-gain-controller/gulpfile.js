var gulp = require('gulp');
var uglifyjs = require('gulp-uglifyjs');
var rename = require('gulp-rename');
var wrapAMD = require('gulp-wrap-amd');

var dest = './build';

gulp.task('minify', function() {
    gulp.src(['./mediastream-gain-controller.js'])
        .pipe(wrapAMD({
            exports: 'GainController'
        }))
        .pipe(gulp.dest(dest))
        .pipe(rename('mediastream-gain-controller.min.js'))
        .pipe(uglifyjs({
            verbose: true
        }))
        .pipe(gulp.dest(dest));
});

gulp.task('default', ['minify']);